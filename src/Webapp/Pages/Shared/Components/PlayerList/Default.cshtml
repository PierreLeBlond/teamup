@using Webapp.Models;
@using System.Web;
@using Microsoft.AspNetCore.Http.Extensions;

@namespace Webapp.Pages.Components
@model PlayerListViewComponentModel

<ul>
  <li>Choose a player</li>
  @foreach (var player in Model.Players)
  {
    var url = $"{Context.Request.Scheme}://{Context.Request.Host}{Context.Request.Path}?currentPlayerId={player.Id}";
    <li><a href="@url">@player.Name</a></li>
  }
</ul>

@if (Model.Player is not null)
{

  @await Html.PartialAsync("_PlayerPartial", new PlayerPartial
{
  Player = Model.Player,
  CurrentPlayer = Model.Player
})
}
