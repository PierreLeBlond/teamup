@page "/tournaments/{tournament}/games/{game}"
@model Webapp.Pages.GameModel
@{
  ViewData["Title"] = "Game";
}

<h1>@Model.Game.Name</h1>

@if (Model.IsOwner)
{
  <a asp-area="" asp-page="/EditGame" asp-route-tournament=@Model.Tournament.Id asp-route-game=@Model.Game.Id>
  Edit game
</a>
}

<h2>Rewards</h2>

@if (Model.IsOwner)
{
  <a asp-area="" asp-page="/EditRewards" asp-route-tournament=@Model.Tournament.Id asp-route-game=@Model.Game.Id>
  Edit rewards
</a>
}

<ul>
  @foreach (var reward in Model.Rewards)
  {
    <li>@reward.Value</li>
  }
</ul>

<h2>Teams</h2>

@if (Model.Teams.Count == 0)
{
  <p>Teams have not been formed yet.</p>
}
else
{
  <ul>
  @foreach (var team in Model.Teams)
    {
      <li>
        <h2> <a asp-area="" asp-page="/Team" asp-route-tournament=@Model.Tournament.Id asp-route-game=@Model.Game.Id
            asp-route-team=@team.Id>Team @team.Number</a> </h2>
        <p>Bonus: @team.Bonus</p>
        <p>Malus: @team.Malus</p>
        <p>Result: @(team.Result?.Value.ToString() ?? "Unknown")</p>
      </li>
    }
  </ul>
}

@if (Model.IsOwner)
{
  <form method="post">
  <button type="submit">
    @if (Model.Teams.Count == 0)
      {
        <p>Generate teams</p>
      }
      else
      {
        <p>Re-generate teams</p>
      }
    </button>
  </form>
}